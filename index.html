<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GT Raid</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', sans-serif;
      background-color: #0d1117;
      color: #e6edf3;
    }

    .menu-active {
      border-bottom: 3px solid currentColor;
    }

    .result-box {
      transition: all 0.3s ease;
    }

    .calc-btn {
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .calc-btn:active {
      box-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type="number"] {
      -moz-appearance: textfield;
      appearance: textfield;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
</head>
<body class="min-h-full w-full m-0 p-0">
  <div class="w-full min-h-full" id="app">
    <!-- Header -->
    <header class="w-full shadow-md bg-[#161b22] text-[#e6edf3] border-b border-[#30363d]" id="header">
      <div class="max-w-6xl mx-auto px-6 py-4">
        <h1 class="text-3xl font-bold" id="siteTitle">GT Raid</h1>
      </div>
    </header>

    <!-- Main Content -->
    <main class="w-full">
      <div class="max-w-6xl mx-auto px-6 py-8">
        <!-- Home Page -->
        <div id="homePage" class="page-content">
          <div class="flex items-center justify-center min-h-screen">
            <div class="text-center">
              <h2 class="text-4xl font-bold mb-12 text-[#e6edf3]" id="homeTitle">Choose Menu</h2>
              <div class="flex flex-col sm:flex-row gap-6 justify-center">
                <button id="homeButtonCalculator" class="px-12 py-8 rounded-xl font-bold text-2xl transition-all transform hover:scale-105 active:scale-95 shadow-lg bg-gradient-to-r from-[#7c3aed] to-[#4f46e5] text-white" onclick="showPage('calculator')">üìä Calculator</button>
                <a href="https://www.gtales.top/raids?tab=focus" target="_blank" rel="noopener noreferrer" id="homeButtonTutorial" class="px-12 py-8 rounded-xl font-bold text-2xl transition-all transform hover:scale-105 active:scale-95 shadow-lg inline-block bg-gradient-to-r from-[#7c3aed] to-[#4f46e5] text-white">üìö Tutorial</a>
              </div>
            </div>
          </div>
        </div>

        <!-- Calculator Page -->
        <div id="calculatorPage" class="page-content hidden">
          <div class="max-w-md mx-auto">
            <button onclick="showPage('home')" class="mb-6 px-4 py-2 rounded-lg font-semibold transition-all hover:opacity-80 bg-[#7c3aed] text-white" id="backButtonCalc">‚Üê Back</button>
            <h2 class="text-2xl font-bold mb-4 text-[#e6edf3]" id="calculatorTitle">Kalkulator Khusus</h2>
            <div class="rounded-lg shadow-lg p-6 bg-[#161b22] border border-[#30363d]" id="calculatorCard">
              <!-- Result Display -->
              <div id="resultContainer" class="mb-4">
                <div class="rounded-lg p-4 bg-[#7c3aed20] border border-[#7c3aed50]" id="resultBox">
                  <div class="text-sm font-semibold mb-1 opacity-75">Result:</div>
                  <div class="text-3xl font-bold text-[#e6edf3]" id="resultValue">0</div>
                </div>
              </div>
              <form onsubmit="calculate(event)">
                <label for="numberInput" class="block font-semibold mb-2 text-[#e6edf3]" id="inputLabel">Masukkan Angka:</label>
                <input type="number" id="numberInput" step="1" class="w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 transition-all mb-4 bg-[#0d1117] border-[#30363d] text-[#e6edf3]" placeholder="Example: 100" required>
                <button type="submit" id="calculateButton" class="w-full py-3 rounded-lg font-semibold transition-all transform hover:scale-105 active:scale-95 bg-gradient-to-r from-[#7c3aed] to-[#4f46e5] text-white">Hitung</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const defaultConfig = {
      background_color: "#0d1117",
      header_color: "#161b22",
      primary_color: "#7c3aed",
      text_color: "#e6edf3",
      card_color: "#161b22",
      site_title: "GT Raid",
      menu_calculator: "Calculator",
      menu_tutorial: "Tutorial",
      calculator_title: "Special Calculator",
      calculator_description: "Enter a number to calculate with formula: (number √ó 1.5) √∑ 1.3",
      input_label: "Enter Number:",
      button_calculate: "Calculate",
      tutorial_title: "Usage Tutorial",
      tutorial_intro: "Learn how to use this calculator easily",
      font_family: "Inter",
      font_size: 16
    };

    async function onConfigChange(config) {
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const headerColor = config.header_color || defaultConfig.header_color;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const cardColor = config.card_color || defaultConfig.card_color;
      const fontFamily = config.font_family || defaultConfig.font_family;
      const fontSize = config.font_size || defaultConfig.font_size;

      document.body.style.backgroundColor = backgroundColor;
      document.body.style.color = textColor;
      document.body.style.fontFamily = `${fontFamily}, sans-serif`;

      document.getElementById('app').style.backgroundColor = backgroundColor;
      document.getElementById('header').style.backgroundColor = headerColor;
      document.getElementById('header').style.color = textColor;

      document.getElementById('homeTitle').style.color = textColor;
      document.getElementById('homeButtonCalculator').style.background = `linear-gradient(135deg, ${primaryColor}, #4f46e5)`;
      document.getElementById('homeButtonCalculator').style.color = '#ffffff';
      document.getElementById('homeButtonTutorial').style.background = `linear-gradient(135deg, ${primaryColor}, #4f46e5)`;
      document.getElementById('homeButtonTutorial').style.color = '#ffffff';

      document.getElementById('backButtonCalc').style.backgroundColor = primaryColor;
      document.getElementById('backButtonCalc').style.color = '#ffffff';

      document.getElementById('calculatorCard').style.backgroundColor = cardColor;
      document.getElementById('calculatorCard').style.color = textColor;

      document.getElementById('numberInput').style.borderColor = primaryColor;
      document.getElementById('numberInput').style.color = textColor;

      document.getElementById('calculateButton').style.background = `linear-gradient(135deg, ${primaryColor}, #4f46e5)`;
      document.getElementById('calculateButton').style.color = '#ffffff';

      const resultBox = document.getElementById('resultBox');
      if (resultBox) {
        resultBox.style.backgroundColor = primaryColor + '20';
        resultBox.style.color = textColor;
      }

      document.getElementById('siteTitle').textContent = config.site_title || defaultConfig.site_title;
      document.getElementById('calculatorTitle').textContent = config.calculator_title || defaultConfig.calculator_title;
      document.getElementById('inputLabel').textContent = config.input_label || defaultConfig.input_label;
      document.getElementById('calculateButton').textContent = config.button_calculate || defaultConfig.button_calculate;

      document.getElementById('siteTitle').style.fontSize = `${fontSize * 1.875}px`;
      document.getElementById('homeTitle').style.fontSize = `${fontSize * 2.5}px`;
      document.getElementById('homeButtonCalculator').style.fontSize = `${fontSize * 1.5}px`;
      document.getElementById('homeButtonTutorial').style.fontSize = `${fontSize * 1.5}px`;
      document.querySelectorAll('h2').forEach(h2 => {
        if (h2.id !== 'homeTitle') {
          h2.style.fontSize = `${fontSize * 1.5}px`;
        }
      });
      document.querySelectorAll('h3').forEach(h3 => {
        h3.style.fontSize = `${fontSize * 1.25}px`;
      });
      document.querySelectorAll('p, input, label').forEach(el => {
        el.style.fontSize = `${fontSize}px`;
      });
      document.querySelectorAll('button').forEach(btn => {
        if (btn.id !== 'homeButtonCalculator' && btn.id !== 'homeButtonTutorial') {
          btn.style.fontSize = `${fontSize}px`;
        }
      });
    }

    function showPage(page) {
      const homePage = document.getElementById('homePage');
      const calculatorPage = document.getElementById('calculatorPage');

      homePage.classList.add('hidden');
      calculatorPage.classList.add('hidden');

      if (page === 'home') {
        homePage.classList.remove('hidden');
      } else if (page === 'calculator') {
        calculatorPage.classList.remove('hidden');
      }

      window.scrollTo(0, 0);
    }

    function calculate(event) {
      event.preventDefault();

      const input = document.getElementById('numberInput');
      const resultContainer = document.getElementById('resultContainer');
      const resultValue = document.getElementById('resultValue');

      const number = parseFloat(input.value);

      if (isNaN(number)) {
        return;
      }

      const result = (number * 1.5) / 1.3;
      resultValue.textContent = Math.round(result);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.header_color || defaultConfig.header_color,
              set: (value) => {
                config.header_color = value;
                window.elementSdk.setConfig({ header_color: value });
              }
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => {
                config.primary_color = value;
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.card_color || defaultConfig.card_color,
              set: (value) => {
                config.card_color = value;
                window.elementSdk.setConfig({ card_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["site_title", config.site_title || defaultConfig.site_title],
          ["menu_calculator", config.menu_calculator || defaultConfig.menu_calculator],
          ["menu_tutorial", config.menu_tutorial || defaultConfig.menu_tutorial],
          ["calculator_title", config.calculator_title || defaultConfig.calculator_title],
          ["calculator_description", config.calculator_description || defaultConfig.calculator_description],
          ["input_label", config.input_label || defaultConfig.input_label],
          ["button_calculate", config.button_calculate || defaultConfig.button_calculate],
          ["tutorial_title", config.tutorial_title || defaultConfig.tutorial_title],
          ["tutorial_intro", config.tutorial_intro || defaultConfig.tutorial_intro]
        ])
      });

      onConfigChange(window.elementSdk.config);
    }
  </script>
</body>
</html>